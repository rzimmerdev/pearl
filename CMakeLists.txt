cmake_minimum_required(VERSION 3.10)
project(tcc)

find_program(PDFLATEX pdflatex)

# Check if pdflatex is found
if(NOT PDFLATEX)
    message(FATAL_ERROR "pdflatex not found!")
endif()

add_custom_target(
    proposal ALL
    COMMAND ${PDFLATEX} ${CMAKE_SOURCE_DIR}/proposal/proposal.tex
    WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
    COMMENT "Building LaTeX document"
)

# Optional: Add clean-up target for auxiliary files generated by pdflatex
add_custom_target(
    clean_latex
    COMMAND 
    rm -f 
      ${CMAKE_SOURCE_DIR}/proposal/*.aux
      ${CMAKE_SOURCE_DIR}/proposal/*.log 
      ${CMAKE_SOURCE_DIR}/proposal/*.out 
      ${CMAKE_SOURCE_DIR}/proposal/*.toc 
      ${CMAKE_SOURCE_DIR}/proposal/*.pdf
    COMMENT "Cleaning up LaTeX auxiliary files"
)
